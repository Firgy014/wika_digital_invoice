<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>
        <record id="view_wika_account_move_form_inherit2" model="ir.ui.view">
             <field name="name">wika.account.move.inherit2.view.form</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="l10n_id_efaktur.account_move_efaktur_form_view"/>
              <field name="arch" type="xml">
                    <xpath expr="//field[@name='l10n_id_replace_invoice_id']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='l10n_id_tax_number']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                   <xpath expr="//field[@name='partner_id']" position="after">
                       <field name="l10n_id_tax_number" required="1"/>
                   </xpath>
            </field>
        </record>

        <!-- form -->
        <record id="view_wika_account_move_form_inherit" model="ir.ui.view">
            <field name="name">wika.account.move.inherit.view.form</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <!-- state -->
                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="statusbar_visible">draft,uploaded,approved</attribute>
                </xpath>
                    <div name="button_box" position="inside">
                        <button class="oe_stat_button" type="object" name="get_documents" icon="fa-file-text-o">
                            <field string="Documents" name="documents_count" widget="statinfo"/>
                        </button>
                    </div>

                <!-- button -->
                <xpath expr="/form/header/button[@name='action_invoice_sent']" position="before">
                    <button name="action_print_invoice" string="Print" type="object" class="oe_highlight"/>
                    <button name="action_submit" string="SUBMIT" type="object" class="oe_highlight" 
                    states="draft,rejected"/>
                    <button name="action_approve" string="APPROVE" type="object" class="btn-success"
                    states="uploaded"/>
                     <button name="action_reject" string="REJECT" type="object" class="btn-danger"
                     states="uploaded"/>
                </xpath>
                <xpath expr="/form/header/button[@name='action_post']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="/form/header/button[2]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='purchase_vendor_bill_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!-- field -->
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="bap_id" attrs="{'readonly': [('state', 'in', ['uploaded', 'approved'])]}"/>
                    <field name="po_id" attrs="{'readonly': [('state', 'in', ['uploaded', 'approved'])]}"/>
                     <field name="no_doc_sap"/>
                    <field name="no_invoice_vendor"/>
                    <field name="special_gl_id"/>
                    <field name="valuation_class"/>
                    <field name="invoice_number"/>
                    <field name="amount_invoice"/>
                    <field name="amount_total_footer" invisible="1"/>
                </xpath>
                <xpath expr="//group[@id='header_right_group']/field[@name='currency_id']" position="before">
                    <field name="baseline_date" required="1"/>
                </xpath>
                <xpath expr="//field[@name='invoice_date']" position="after">
                    <field name="branch_id" domain="[('biro', '=', False)]"
                        attrs="{'readonly': [('state', 'in', ['uploaded', 'approved'])]}"/>
                     <field name="check_biro" invisible="1"/>
                    <field name="department_id" domain="[('biro', '=', True), ('parent_id', '=', branch_id)]"
                        attrs="{'readonly': [('state', 'in', ['uploaded', 'approved'])], 'invisible': [('check_biro', '=', False)]}"/>
                    <field name="project_id" attrs="{'readonly': [('state', 'in', ['upload', 'approved'])]}"/>
                    <!-- <field name="sap_doc_number" attrs="{'readonly': [('state', 'in', ['upload', 'approve'])]}"/> -->
                    <field name="step_approve" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='payment_reference']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='partner_bank_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <!-- <xpath expr="//field[@name='partner_bank_id']" position="after">
                    <field name="invoice_date_due" attrs="{'readonly': [('state', 'in', ['upload', 'approve'])]}"/>
                </xpath> -->
                <xpath expr="//group/field[@name='date']" position="attributes">
                    <attribute name="string">Posting Date</attribute>
                </xpath>
                <xpath expr="//label[2][@for='invoice_date']" position="attributes">
                    <attribute name="string">Document Date</attribute>
                </xpath>
                <xpath expr="//label[3][@for='ref']" position="attributes">
                    <attribute name="string">Header Text</attribute>
                    <attribute name="required">1</attribute>
                </xpath>
                <!-- <xpath expr="//notebook/page[@name='other_info']" position="ass">
                    <field name="payment_reference" />
                </xpath> -->
                <xpath expr="//notebook/page[@name='other_info']//field[@name='company_id']" position="after">
                    <field name="payment_reference"/>
                    <field name="pr_id" invisible="1"/>
                    <field name="partner_bank_id" string="Bank Account"/>
                    <field name="retention_due"/>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[13]" position="after">
                    <field name="bap_line_id" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='tax_totals']" position="before">
                    <field name="pph_ids" widget="many2many_tags"/>
                    <field name="total_pph"/>
                </xpath>
                <xpath expr="//notebook/page[@name='other_info']" position="after">
                    <page string="List Document">
                        <field name="document_ids" attrs="{'readonly': [('state', 'in', ['uploaded', 'approved'])]}">
                            <tree>
                                <field name="document_id"/>
                                <field name="document" widget="binary_button" filename="filename"/>
                                <field name="filename" invisible="1"/>
                                <field name="state"/>
                            </tree>
                            <form>
                                <group>
                                    <field name="document" widget="pdf_viewer" filename="filename"/>
                                    <field name="filename" invisible="1"/>
                                    <field name="state" invisible="1"/>
                                </group>
                            </form>
                        </field>
                    </page>
                    <page string="List Approval">
                        <field name="history_approval_ids" attrs="{'readonly': [('state', 'in', ['upload', 'approve'])]}">
                            <tree string="List Approval">
                                <field name="user_id"/>
                                <field name="groups_id"/>
                                <field name="date"/>
                                <field name="note"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
            </field>      
        </record>

        <!-- tree -->
        <record id="view_wika_account_move_tree_inherited" model="ir.ui.view">
            <field name="name">wika.account.move.inherit.view.tree</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_in_invoice_bill_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="branch_id"/>
                    <field name="department_id"/>
                    <field name="project_id"/>
                    <field name="partner_id"/>
                    <field name="invoice_date"/>
                    <!-- <field name="amount_total_signed"/> -->
                </xpath>
                
                <!-- hide tree field -->
                <xpath expr="field[@name='invoice_partner_display_name']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                 <xpath expr="//field[@name='amount_total_signed']" position="before">
                    <field name="amount_untaxed"/>
                     <field name="amount_tax"/>
                     <field name="amount_total"/>
                 </xpath>
                 <xpath expr="field[@name='amount_total_signed']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                 <xpath expr="field[@name='amount_total_in_currency_signed']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='invoice_date_due']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='ref']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='activity_ids']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='invoice_date']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='amount_untaxed_signed']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='date']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='invoice_origin']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='payment_reference']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='company_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='amount_residual_signed']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='currency_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='to_check']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='amount_tax_signed']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

    </data>
    
</odoo>
