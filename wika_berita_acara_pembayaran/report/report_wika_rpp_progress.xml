<odoo>
    <report
        id="report_wika_rpp_progress_id"
        model="wika.berita.acara.pembayaran"
        string="Report Wika RPP Progress"
        report_type="qweb-pdf"
        name="wika_berita_acara_pembayaran.report_wika_rpp_progress"
        file="wika_berita_acara_pembayaran.report_wika_rpp_progress"
        attachment_use="False"
        paperformat="wika_berita_acara_pembayaran.report_qweb_paperformat"/>

    <template id="report_wika_rpp_progress">
        <t t-foreach="docs" t-as="o">
        <t t-call="web.html_container">
            <t t-call="web.internal_layout">
                <div class="page">
                    <div style="text-align: center; margin-top: 80px; font-size: 14px;">
                        <t t-if="o.currency_id.name != 'IDR'">
                            <h4>Work Progress Recap</h4>
                        </t>
                        <t t-if="o.currency_id.name == 'IDR'">
                            <h4>Rekap Progress Pekerjaan</h4>
                        </t>
                    </div>
                    <div class="d-flex justify-content-center" style="margin-top: 80px; width: 100%;">
                        <table class="table table-borderless" style="width:100%;">
                            <tbody>
                                <tr style="text-align: left;">
                                    <td rowspan="2" style="padding: 3px;">1.</td>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">Job</t>
                                        <t t-if="o.currency_id.name == 'IDR'">Pekerjaan</t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"><t t-esc="o.job"/></td>
                                </tr>
                                <tr style="text-align: left;">
                                    <td style="padding: 10px 1px 1px 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">Project</t>
                                        <t t-if="o.currency_id.name == 'IDR'">Proyek</t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"><t t-esc="o.project_id.description"/></td>
                                </tr>
                                <tr style="text-align: left;">
                                    <td rowspan="4" style="padding: 3px;">2.</td>
                                    <td style="padding: 10px 1px 1px 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">Contract Date</t>
                                        <t t-if="o.currency_id.name == 'IDR'">Tanggal Kontrak</t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"><t t-esc="o.begin_date"/></td>
                                </tr>
                                <tr style="text-align: left;">
                                    <td style="padding: 10px 1px 1px 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">PO Number</t>
                                        <t t-if="o.currency_id.name == 'IDR'">Nomor PO</t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"><t t-esc="o.po_id.name"/></td>
                                </tr>
                                <tr style="text-align: left;">
                                    <td style="padding: 10px 1px 1px 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">Contract Number</t>
                                        <t t-if="o.currency_id.name == 'IDR'">Nomor Kontrak</t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"><t t-esc="o.sap_doc_number"/></td>
                                </tr>
                                <tr style="text-align: left;">
                                    <td style="padding: 10px 1px 1px 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">Contract Value</t>
                                        <t t-if="o.currency_id.name == 'IDR'">Nilai Kontrak</t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;">
                                        <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.po_id.amount_untaxed)"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style="margin-top: 50px;">
                        <style>
                            .table tbody th,
                            .table tbody td,
                            .table tbody p {
                                font-size: 14px; /* Sesuaikan ukuran teks yang diinginkan */
                            }
                        </style>
                        <table class="table table-borderless" style="width:100%">
                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col" style="width: auto;"></th>
                                    <th scope="col" style="width: auto;"></th>
                                    <th scope="col" style="width: auto;"></th>
                                    <th scope="col" style="width: auto;"></th>
                                    <th scope="col" style="width: auto;"></th>
                                    <th scope="col" style="width: auto;"></th>
                                    <th scope="col" style="width: auto;"></th>
                                    <!-- <th scope="col" style="width: 14%;"></th> -->
                                </tr>
                            </thead>
                            <tbody>
                                <t t-if="o.currency_id.name != 'IDR'">
                                    <tr>
                                        <th scope="row" style="padding: 1px;">1.</th>
                                        <td style="padding: 1px;"><strong>ACHIEVEMENT VALUE</strong></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                    </tr>
                                </t>
                                <t t-if="o.currency_id.name == 'IDR'">
                                    <tr>
                                        <th scope="row" style="padding: 1px;">1.</th>
                                        <td style="padding: 1px;"><strong>NILAI PRESTASI</strong></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                    </tr>
                                </t>
                                <tr>
                                    <th scope="row" style="padding: 1px;">1.1</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Previous
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            Yang lalu
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;">
                                        <t t-esc="'{:.2f}'.format((o.last_value / o.po_id.amount_untaxed) * 100) if o.last_value > 0 else 0"/>%
                                    </td>
                                    <td style="padding: 1px;">x</td>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.po_id.amount_untaxed) if o.po_id.amount_untaxed else ''"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.po_id.amount_untaxed) if o.po_id.amount_untaxed else ''"/>
                                        </t>
                                    </td>
                                    <!-- <td style="text-align: right; padding: 1px;"></td> -->
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.last_value)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.last_value)"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" style="padding: 1px;">1.2</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Currenty
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            Saat ini
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;">
                                        <t t-esc="'{:,.2f}'.format((o.total_amount / o.po_id.amount_untaxed) * 100) if o.total_amount > 0 else 0"/>%
                                    </td>
                                    <td style="padding: 1px;">x</td>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.po_id.amount_untaxed) if o.po_id.amount_untaxed else ''"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.po_id.amount_untaxed) if o.po_id.amount_untaxed else ''"/>
                                        </t>
                                    </td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.total_amount)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.total_amount)"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="padding: 1px;" scope="row">1.3</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Up until now
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            S/d saat ini
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;">
                                        <t t-esc="'{:,.2f}'.format(((o.last_value + o.total_amount) / (o.po_id.amount_untaxed)) * 100)"/>%
                                    </td>
                                    <td style="padding: 1px;">x</td>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.po_id.amount_untaxed) if o.po_id.amount_untaxed else 0"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.po_id.amount_untaxed) if o.po_id.amount_untaxed else 0"/>
                                        </t>
                                    </td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.last_value + o.total_amount)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.last_value + o.total_amount)"/>
                                        </t>
                                    </td>
                                </tr>
                                <t t-if="o.currency_id.name != 'IDR'">
                                    <tr>
                                        <th scope="row" style="padding: 1px;">2.</th>
                                        <td style="padding: 1px;"><strong>DOWN PAYMENT DISCOUNT</strong></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                    </tr>
                                </t>
                                <t t-if="o.currency_id.name == 'IDR'">
                                    <tr>
                                        <th scope="row" style="padding: 1px;">2.</th>
                                        <td style="padding: 1px;"><strong>POTONGAN UANG MUKA</strong></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                    </tr>
                                </t>
                                <tr>
                                    <th scope="row" style="padding: 1px;">2.1</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Previous
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            Yang lalu
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.last_dp_total)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.last_dp_total)"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" style="padding: 1px;">2.2</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Currenty
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            Saat ini
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;">
                                        <t t-esc="o.amount_pecentage_tmp"/>%
                                    </td>
                                    <td style="padding: 1px;">x</td>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.total_amount) if o.total_amount else 0"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.total_amount) if o.total_amount else 0"/>
                                        </t>
                                    </td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.dp_total)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.dp_total)"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="padding: 1px;" scope="row">2.3</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Up until now
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            S/d saat ini
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.last_dp_total + o.dp_total)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.last_dp_total + o.dp_total)"/>
                                        </t>
                                    </td>
                                </tr>
                                <t t-if="o.currency_id.name != 'IDR'">
                                    <tr>
                                        <th scope="row" style="padding: 1px;">3.</th>
                                        <td style="padding: 1px;"><strong>RETENTION DISCOUNT</strong></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                    </tr>
                                </t>
                                <t t-if="o.currency_id.name == 'IDR'">
                                    <tr>
                                        <th scope="row" style="padding: 1px;">3.</th>
                                        <td style="padding: 1px;"><strong>POTONGAN RETENSI</strong></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                        <td style="padding: 1px;"></td>
                                    </tr>
                                </t>
                                <tr>
                                    <th scope="row" style="padding: 1px;">3.1</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Previous
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            Yang lalu
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.last_retensi_total)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.last_retensi_total)"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" style="padding: 1px;">3.2</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Currenty
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            Saat ini
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;">
                                        <t t-esc="o.amount_pecentage_tmp"/>%
                                    </td>
                                    <td style="padding: 1px;">x</td>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.total_amount) if o.total_amount else ''"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.total_amount) if o.total_amount else ''"/>
                                        </t>
                                    </td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.retensi_total)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.retensi_total)"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="padding: 1px;" scope="row">3.3</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            Up until now
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            S/d saat ini
                                        </t>
                                    </td>
                                    <td style="padding: 1px;">:</td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.last_retensi_total + o.retensi_total)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.last_retensi_total + o.retensi_total)"/>
                                        </t>
                                    </td>
                                </tr>
                                <tr>
                                    <th style="padding: 1px;" scope="row">4.</th>
                                    <td style="padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <strong>NET BILLING AMOUNT</strong>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <strong>JUMLAH TAGIHAN NETTO</strong>
                                        </t>
                                    </td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="padding: 1px;"></td>
                                    <td style="text-align: right; padding: 1px;">=</td>
                                    <td style="text-align: right; padding: 1px;">
                                        <t t-if="o.currency_id.name != 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.2f}'.format(o.total_amount - o.dp_total - o.retensi_total)"/>
                                        </t>
                                        <t t-if="o.currency_id.name == 'IDR'">
                                            <t t-esc="o.currency_id.symbol"/>. <t t-esc="'{:,.0f}'.format(o.total_amount - o.dp_total - o.retensi_total)"/>
                                        </t>
                                    </td>
                                </tr>
                                <t t-set="jumlah_total_netto" t-value="(o.total_amount - o.dp_total - o.retensi_total)"/>
                            </tbody>
                        </table>
                    </div>
                </div>
            </t>
        </t>
        </t>
    </template>
</odoo>
