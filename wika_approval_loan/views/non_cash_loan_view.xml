<?xml version="1.0" encoding="UTF-8"?>

<odoo>
    <data>
        <!-- <record model="ir.ui.view" id="ncl_view_tree_from_sap">
			<field name="name">Non Cash Loan.List</field>
			<field name="model">noncash.loan</field>
             <field name="inherit_id" ref="mcs_loan.ncl_view_tree_id"/>
               <field name="arch" type="xml">
               <xpath expr="//field[@name='currency_id']" position='after'>
                   <field name="from_sap"/>
					<field name="payment_proposal_id_sap"/>
               </xpath>
               </field>
        </record>
        <record model="ir.ui.view" id="ncl_view_tree_depart_from_sap">
			<field name="name">Non Cash Loan.List Department</field>
			<field name="model">noncash.loan</field>
             <field name="inherit_id" ref="mcs_loan.ncl_view_tree_id_departemen"/>
               <field name="arch" type="xml">
               <xpath expr="//field[@name='currency_id']" position='after'>
                   <field name="from_sap"/>
					<field name="payment_proposal_id_sap"/>
               </xpath>
               </field>
        </record> -->
        <record model="ir.ui.view" id="ncl_view_form_request">
            <field name="name">Non Cash Loan Form Request</field>
            <field name="model">wika.noncash.loan</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <form string="Loan Form">
                    <!-- <header>
                        <button name="submit" type="object" string="Meminta Persetujuan"
                                class="oe_highlight" attrs="{'invisible': [('stage_name','!=','Pengajuan')]}"/>
                        <button name="approve_input" type="object" string="Approve"
                                class="oe_highlight"
                                attrs="{'invisible': [('stage_name','not in',['Proses Approval','Reject','Approve'])]}"/>
                        <button name="reject_input" type="object" string="Reject"
                                attrs="{'invisible': [('stage_name','not in',['Proses Approval','Reject','Approve'])]}"/>
                        <button name="cancel" type="object" string="Batal"
							attrs="{'invisible': [('stage_name','=','Cancel')]}" />
                        <field name="stage_id" widget="statusbar"
                               domain="[('request','!=',False)]"/>

                        <field name="stage_name" invisible="1"/>

                    </header> -->
                    <sheet>
                        <!-- <div class="oe_title">
                            <h1>
                                <field name="name" nolabel="1"/>
                            </h1>
                        </div> -->
                        <group>
                            <group string="Input Data">
                                <field name="jenis_nasabah" required="1"/>
                                <field name="bank_id" options="{'no_create':True,'no_open':True}" required="1"/>
                                <!-- <field name="jenis_id" options="{'no_create':True,'no_open':True}" required="1"
                                       domain="[('tipe', '=', 'Non Cash')]"/>
                                <field name="plafond_bank_id" options="{'no_create':True,'no_open':True}" required="1"/>
                                <field name="tipe_jenis"  attrs="{'required':[('nama_jenis','!=','SCF')]}"  options="{'no_create':True,'no_open':True}"
                                       domain="[('jenis_id', '=', jenis_id)]" widget="selection"/>
                                <field name="branch_id" options="{'no_create':True,'no_open':True}" required="1"/>
                                <field name="projek_id" options="{'no_create':True,'no_open':True}"
                                       attrs="{'readonly': ['|',('stage_name','in',['Akseptasi','Disetujui','TR']),('from_sap','=',True)],
											'invisible': ['|','|',('anak_perusahaan','!=',False),('department_parent','!=',False),('tipe_jenis_name','in',['USANCE Pengadaan','Tender'])]}"
                                      domain="[('sap_code','!=',False)]" />
                                <field name="partner_jo" attrs="{'invisible': [('nama_jenis','!=','BG')]}"/>
                                <field name="vendor_id" options="{'no_create':True,'no_open':True}"
                                       attrs="{'readonly': [('stage_name','in',['Akseptasi','Disetujui','TR'])],
											'invisible': [('anak_perusahaan','!=',False)]}"
                                />
                                <field name="nama_proyek"
                                       attrs="{'invisible': [('tipe_jenis_name','not in',['USANCE Pengadaan','Tender'])]}"/>
                                <field name="nama_vendor"
                                       attrs="{'invisible': ['|',('tipe_jenis_name','!=','Tender'),('nama_jenis','!=','BG')]}"/>
                                <field name="nama_nasabah" attrs="{'invisible': [('anak_perusahaan','!=',True)]}"/>
                                <field name="nomor_surat"/>
                                <label for="tenor" string="Tenor" attrs="{'invisible': [('nama_jenis','=','BG')]}"/>
                                <div class="o_address_format" attrs="{'invisible': [('nama_jenis','=','BG')]}">
                                    <field name="tenor" class="o_address_city"
                                           attrs="{'invisible': [('nama_jenis','=','BG')]}"/>
                                    Hari ,terhitung sejak
                                    <field name="sejak" class="o_address_city"
                                           attrs="{'invisible': [('nama_jenis','=','BG')]}"/>
                                </div>
                                <field name="catatan"/>
                                <field name="invoice_id" widget="many2many_tags" options="{'no_create':True}"/>
                                <field name="sisa_plafond" invisible="1"/>
                                <field name="sisa_plafond_max" invisible="1"/>
                                <field name="tipe_jenis_name" invisible="1"/> -->
                            </group>
                            <!-- <group>
                                <field name="tgl_pembukaan"
                                       attrs="{'readonly': [('stage_name','in',['Setuju','Akseptasi','Disetujui','TR','Perpanjangan'])]}"/>
                                <field name="currency_id" groups="base.group_multi_currency"
                                       options="{'no_create':True,'no_open':True}"
                                       attrs="{'readonly': [('stage_name','in',['TR','Perpanjangan'])]}"/>
                                <field name="jumlah_pengajuan_asing" widget="monetary"
                                       options="{'currency_field': 'currency_id'}"
                                       attrs="{'invisible': [('currency_id','=',13)]}"/>
                                <field name="kurs" attrs="{'invisible': [('currency_id','=',13)]}"/>
                                <field name="is_pmcs" readonly="1" attrs="{'invisible': [('is_pmcs','=',False)]}"/>
                                <field name="nomor_bukti" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="tanggal_kontrak" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="nomor_kontrak" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="nilai_progress" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)],
                                                                    'invisible': [('nama_jenis','!=','SKBDN/LC')]}"/>
                                <field name="potongan_um" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)],
                                                                    'invisible': [('nama_jenis','!=','SKBDN/LC')]}"/>
                                <field name="nilai_pokok_tagihan" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="ppn" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="nilai_pokok_ppn" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1"/>
                                <field name="nilai_pokok_ppn" widget="monetary" options="{'currency_field': 'currency_id'}" invisible="1"/>
                                <field name="potongan_pph_persen" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="potongan_pph" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="potongan_lain" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                                <field name="nilai_tagihan_netto" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1"/>
                                <field name="nilai_tagihan_netto" widget="monetary" options="{'currency_field': 'currency_id'}"  invisible="1"/>
                                <field name="jumlah_pengajuan" widget="monetary"
                                       options="{'currency_field': 'company_currency'}"
                                       attrs="{'readonly': [('stage_name','in',['Setuju','Akseptasi','Disetujui','TR','Perpanjangan'])]}"/>
                                <field name="nama_barang" attrs="{'readonly': [('is_pmcs','=',True)],
                                                                    'invisible': [('nama_jenis','!=','SKBDN/LC')]}"/>
                                <field name="step_approve" invisible="1"/>
                                <field name="stage_name" invisible="1"/>
                                <field name="nama_jenis" invisible="1"/>
                                <field name="anak_perusahaan" invisible="1"/>
                                <field name="department_parent" invisible="1"/>
                                <field name="company_currency" invisible="1"/>
									<div style="background-color: aliceblue;" >
                                        <div attrs="{'invisible': [('nama_jenis','!=','SCF')]}">
											<h4>Keterangan :</h4>
                                        <ul>
                                            <li>
                                                Nilai Tagihan Netto = Nilai Pokok + PPN - Potongan PPh - Potongan Lain
                                            </li>
                                            <li>
                                                Nilai Pengajuan = Nilai Pokok Tagihan - Potongan PPh - Potongan Lain
                                            </li>
                                        </ul>
                                            </div>
                                        <div attrs="{'invisible': [('nama_jenis','!=','SKBDN/LC')]}">
                                                <h4>Keterangan :</h4>
                                            <ul>
                                                <li>
                                                    Nilai Pokok = Nilai Progress - Potongan Uang Muka
                                                </li>
                                                <li>
                                                    Nilai Tagihan Netto = Nilai Pokok + PPN - Potongan PPh
                                                </li>
                                                <li>
                                                    Nilai Pengajuan = Nilai Pokok Tagihan - Potongan PPh
                                                </li>
                                            </ul>
                                        </div>
									</div>

                            </group> -->
                        </group>

                        <!-- <notebook>
                            <page name="audit_log" string="History Approval">
                                <field name="audit_log_ids" nolabel="1" readonly="1">
                                    <tree>
                                        <field name="date"/>
                                        <field name="level"/>
                                        <field name="user_id"/>
                                        <field name="groups_id"/>
                                        <field name="description"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="accounting" string="Accounting">
                                <group>
                                    <group>
                                        <field name="nomor_memorial" />
                                        <field name="nilai_akutansi" />
                                        <field name="no_sap" readonly="1" groups="base.group_no_one"/>
                                         <field name="line_item_sap" readonly="1"/>
                                         <field name="payment_proposal_id_sap" readonly="1"/>
                                         <field name="run_date_sap" readonly="1"/>
                                          <field name="fiscal_year_sap" readonly="1" />
                                         <field name="from_sap" groups="base.group_no_one"/>
                                          <field name="upload_to_sap" groups="base.group_no_one"/>
                                         <field name="send" groups="base.group_no_one"/>
                                         <field name="identifier" groups="base.group_no_one"/>
                                    </group>
                                </group>
                            </page>
                        </notebook> -->
                    </sheet>
                    <!-- <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"
                            groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div> -->
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="ncl_view_tree_request_id">
            <field name="name">Non Cash loan.tree</field>
            <field name="model">wika.noncash.loan</field>
            <field name="arch" type="xml">
                <tree string="loan list">
                    <field name="name"/>
                    <!-- <field name="jenis_id"/>
                    <field name="vendor_id"/>
                    <field name="tgl_pembukaan"/>
                    <field name="branch_id"/>
                    <field name="jumlah_pengajuan" sum="Total Pengajuan"/>
                    <field name="jumlah_pengajuan_asing" sum="Nilai Pengajuan Asing"/>
                    <field name="stage_id"/>
                    <field name="currency_id"/>
                    <field name="from_sap"/>
                    <field name="payment_proposal_id_sap"/> -->
                </tree>
            </field>
        </record>


        <record id="ncl_input_action_server_id" model="ir.actions.act_window">
            <field name="name">NCL Input</field>
            <field name="res_model">wika.noncash.loan</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="ncl_view_form_request"/>
            <!-- <field name="context">{'default_form_type': 'input'}</field>
            <field name="domain">[('form_type', '=', 'input')]</field> -->
        </record>

        <menuitem name="Input"
            parent="wika_plafond_bank.menu_non_cash_loan"
            id="ncl_input_request_menu_loan"
            sequence="1"
            action="ncl_input_action_server_id"/>
        <!-- <record id="ncl_input_action_server_id" model="ir.actions.server">
            <field name="name">NCL Input Server</field>
            <field name="model_id" ref="mcs_loan.model_noncash_loan"/>
            <field name="state">code</field>
            <field name="code">action = model.action_input()</field>
            <field eval="True" name="condition"/>
        </record>

        <menuitem name="Input"
                  parent="mcs_loan.menu_non_cash_loan"
                  id="ncl_input_request_menu_loan"
                  sequence="1"
                  action="ncl_input_action_server_id"/>

        <record id="inherit_non_cash_loan_form_view_id" model="ir.ui.view">
            <field name="name">Inherit Non Cash Loan</field>
            <field name="model">noncash.loan</field>
            <field name="inherit_id" ref="mcs_loan.ncl_view_form_id"/>
            <field name="arch" type="xml">
                <xpath expr="//header/button[@name='request']" position='after'>
                    <button name="approve" type="object" string="Disetujui"
                            class="oe_highlight"
                            attrs="{'invisible': [('stage_name','not in',['Diajukan','Proses Persetujuan'])]}"/>
                    <button name="notapprove" type="object" string="Ditolak"
                            attrs="{'invisible': [('stage_name','not in',['Diajukan','Proses Persetujuan'])]}"/>
                    <button name="dok_diterima" type="object" string="Dok Diterima"
                            class="oe_highlight"
                            attrs="{'invisible': [('stage_name','!=','Pembukaan')]}"/>

                </xpath>
                <field name="jumlah_pengajuan" position="after">
                    <field name="step_approve" invisible="1"/>
                    <field name="is_pmcs" readonly="1" attrs="{'invisible': [('is_pmcs','=',False)]}"/>
                </field>

                <xpath expr="//field[@name='projek_id']" position='attributes'>
                    <attribute name="attrs">{'readonly': ['|',('stage_name','in',['Akseptasi','Disetujui','TR']),('from_sap','=',True)]}</attribute>
                </xpath>
                <xpath expr="//notebook/page[@name='rencana_pembayaran']/field/tree/field[@name='keterangan']" position='after'>
                    <field name="nomor_memorial" groups="base.group_no_one"/>
                    <field name="nilai_akutansi"  groups="base.group_no_one"/>
                    <field name="no_sap"  readonly="1" groups="base.group_no_one"/>
                    <field name="line_item_sap" readonly="1" groups="base.group_no_one"/>
                    <field name="payment_proposal_id_sap" readonly="1" groups="base.group_no_one"/>
                    <field name="fiscal_year_sap" readonly="1" groups="base.group_no_one"/>

                </xpath>
                <xpath expr="//notebook/page" position='after'>
                    <page name="audit_log2" string="History Approval">
                        <field name="audit_log_ids" nolabel="1" readonly="1">
                            <tree>
                                <field name="date"/>
                                <field name="level"/>
                                <field name="user_id"/>
                                <field name="groups_id"/>
                                <field name="description"/>
                            </tree>
                        </field>
                    </page>
                    <page name="rincian_nilai" string="Rincian Tagihan">
                        <group col="2">
                            <field name="nomor_bukti" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                            <field name="tanggal_kontrak" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                            <field name="nomor_kontrak" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                            <field name="nilai_pokok_tagihan" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                            <field name="ppn" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                            <field name="nilai_pokok_ppn" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1"/>
                            <field name="nilai_pokok_ppn" widget="monetary" options="{'currency_field': 'currency_id'}" invisible="1"/>
                            <field name="potongan_pph" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                            <field name="potongan_lain" widget="monetary" options="{'currency_field': 'currency_id'}" attrs="{'readonly': [('is_pmcs','=',True)]}"/>
                            <field name="nilai_tagihan_netto" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1"/>
                            <field name="nilai_tagihan_netto" widget="monetary" options="{'currency_field': 'currency_id'}" invisible="1"/>
                        </group>
                    </page>
                    <page name="accounting" string="Accounting">
                        <group>
                            <group>
                                <field name="nomor_memorial" />
                                <field name="nilai_akutansi" />
                                <field name="no_sap" readonly="1"/>
                                 <field name="line_item_sap" readonly="1"/>
                                 <field name="payment_proposal_id_sap" readonly="1"/>
                                 <field name="run_date_sap" readonly="1"/>
                                  <field name="fiscal_year_sap" readonly="1" />
                                 <field name="from_sap" groups="base.group_no_one"/>
                                    <field name="upload_to_sap" groups="base.group_no_one"/>
                                 <field name="send" groups="base.group_no_one"/>
                                 <field name="identifier" groups="base.group_no_one"/>
                                </group>
                        </group>
                    </page>
                    <page name="invoice" string="List Invoice">
                        <field name="invoice_ids" nolabel="1">
                            <tree editable="bottom" >
                                <field name="name"/>
                                <field name="tanggal"/>
                                <field name="nilai"/>
                                <field name="nilai_asing"/>
                                <field name="ket"/>
                                <field name="doc_number"/>
                                <field name="run_date"/>
                                <field name="invoice_id" readonly="1"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
            </field>
        </record>

        <record id="inherit_prognosa_form_view_id" model="ir.ui.view">
            <field name="name">Inherit Prognosa Loan</field>
            <field name="model">loan.prognosa</field>
            <field name="inherit_id" ref="mcs_loan.prognosa_view_form_id"/>
            <field name="arch" type="xml">
                <xpath expr="//page/field/tree/field[@name='nilai_pembukaan']" position='after'>
                    <field name="terpakai"/>
                </xpath>
                <xpath expr="//page/field/tree/field[@name='nilai_tr']" position='after'>
                    <field name="terpakai_tr"/>
                </xpath>
            </field>
        </record>
        <record id="inherit_ncl_pembayaran_tree_view_id" model="ir.ui.view">
            <field name="name">Inherit NCL Pembayaran</field>
            <field name="model">ncl.pembayaran</field>
            <field name="inherit_id" ref="loan_dashboard.ncl_pembayaran_board_view_tree_id"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='state']" position='after'>
					<field name="nomor_memorial" groups="base.group_no_one"/>
					<field name="nilai_akutansi" groups="base.group_no_one"/>
					<field name="no_sap" groups="base.group_no_one"/>
                     <field name="line_item_sap" readonly="1" groups="base.group_no_one"/>
                     <field name="payment_proposal_id_sap" readonly="1" groups="base.group_no_one"/>
                    <field name="fiscal_year_sap" readonly="1" groups="base.group_no_one"/>

                </xpath>

            </field>
        </record>
        <record id="inherit_ncl_pembayaran_form_view_id" model="ir.ui.view">
            <field name="name">Inherit NCL Pembayaran</field>
            <field name="model">ncl.pembayaran</field>
            <field name="inherit_id" ref="mcs_loan.pembayaran_ncl_view_form_id"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='tgl_swift_tr']" position='after'>
					<field name="nomor_memorial" groups="base.group_no_one"/>
					<field name="nilai_akutansi" groups="base.group_no_one"/>
					<field name="no_sap" groups="base.group_no_one"/>
                     <field name="line_item_sap" readonly="1" groups="base.group_no_one"/>
                     <field name="payment_proposal_id_sap" readonly="1" groups="base.group_no_one"/>
                    <field name="fiscal_year_sap" readonly="1" groups="base.group_no_one"/>

                </xpath>

            </field>
        </record>


        <record model="ir.ui.view" id="ncl_view_search_from_sap">
			<field name="name">Non Cash Loan.search</field>
			<field name="model">noncash.loan</field>
             <field name="inherit_id" ref="mcs_loan.ncl_view_search_id"/>
			<field name="arch" type="xml">
                 <xpath expr="//search/filter[@name='jatuh_tempo_h5']" position='after'>
                    <filter string="From SAP" name="from_sap" domain="[('from_sap','=',True)]"/>
                 </xpath>
                <xpath expr="//search/field[@name='jumlah_pengajuan_asing']" position='after'>
                    <field name="payment_proposal_id_sap"/>
                 </xpath>
			</field>
		</record> -->


    </data>
</odoo>